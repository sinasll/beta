<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>$BLACK</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <!-- Telegram WebApp SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>

<body>

  <div class="header">
    <h1 class="logo">$BLACK</h1>
  </div>

  <div class="container">
    <div class="card global-stats">
      <div class="stats-row">
        <div>Total Mined</div>
        <div><span id="mined">0.00</span> / 100,000,000 $BLACK</div>
      </div>
      <div class="stats-row">
        <div>Total Miners</div>
        <div><span id="totalminers">1,180</span> BLACKers</div>
      </div>
    </div>

    <div class="card">
      <h2 class="card-title">User</h2>
      <div class="stats-row">
        <div>Username</div>
        <div><span id="username">username</span></div>
      </div>
      <div class="stats-row">
        <div>Balance</div>
        <div><span id="balance">0.000</span> $BLACK</div>
      </div>
      <div class="stats-row">
        <div>Mining Power</div>
        <div>x<span id="power">1.0</span></div>
      </div>
      <button class="button" id="upgradeButton">Upgrade Power</button>
      <button class="button" id="mineButton">Start Mining</button>
    </div>

    <div class="card">
      <div class="stats-row">
        <h2 class="card-title">Daily Code</h2>
      <div><span id="dailyCode">Not generated</span></div>
      </div>
      <button class="button" id="copyCodeButton">Copy Code</button>
      <input type="text" id="submitCodeInput" placeholder="Enter 10-digit code" maxlength="10">
      <button class="button" id="submitCodeButton">Submit Code</button>
    </div>

    <div class="countdown" id="countdown">Daily reset in 00:00:00</div>
  </div>

  <nav class="nav-menu" id="nav-menu">
    <ul class="nav-list">
      <li><a href="index.html" class="active"></i> MINE</a></li>
      <li><a href="leaders.html"></i> LEADERS</a></li>          
      <li><a href="earn.html"></i> EARN</a></li>
      <li><a href="friends.html"></i> FRIENDS</a></li>
      <li><a href="wallet.html"></i> WALLET</a></li>
    </ul>
  </nav>

  <script>
    // Telegram WebApp initialization
    const tg = window.Telegram?.WebApp;
    
    // Expand the Mini App to full height
    if (tg) {
      tg.expand();
      tg.enableClosingConfirmation();
    }
    
    // Function to generate a random unique username starting with blackminer
    function generateRandomUsername() {
      // Try to get from localStorage first to maintain consistency
      const storedUsername = localStorage.getItem('generatedUsername');
      if (storedUsername) {
        return storedUsername;
      }
      
      // Generate a new one if not found
      const randomSuffix = Math.floor(Math.random() * 10000000).toString().padStart(7, '0');
      const newUsername = `blackminer${randomSuffix}`;
      localStorage.setItem('generatedUsername', newUsername);
      return newUsername;
    }
    
    // Set username from Telegram or generate a random one
    const usernameElement = document.getElementById('username');
    if (tg?.initDataUnsafe?.user?.username) {
      usernameElement.textContent = `@${tg.initDataUnsafe.user.username}`;
    } else {
      usernameElement.textContent = `@${generateRandomUsername()}`;
    }
    </script>

</body>

</html>